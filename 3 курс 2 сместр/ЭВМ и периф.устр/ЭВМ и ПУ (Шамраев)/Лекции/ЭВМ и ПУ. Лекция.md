## Лекции по ЭВМ и ПУ



### Лекция (27.02.2020)

Формат кадра.

Каждый байт передаваемый по линии SDA должен состоять из 8 бит , кол- во байт передаваемых за 1 сеанс не ограничено. Каждый байт должен заканчиваться битом подтверждения. Данные передаются старшими битами вперед. Подтверждение при передачи обязательно. Во время действия 9-го импульса, на линии тактирования SCL ведущее устройство отпускает линию SDA, а ведомое в этот момент формирует на линии SDA низкий уровень, подтверждая тем самым прием данных. Ведомое устройство может приостановить обмен данными по линии I2C путем удержания низкого уровня на линии SCL

Первый байт передаваемый после условия старт содержит 7 бит адреса, в 8-м бите задается тип операции: 

1 - чтение

0 - запись

Направление передачи данных на СДА может быть изменено ведущим без первоначального останова передачи, для этого формируется повторное условие старт, за которым следует новый адрес и направление.

#### MSP430

Периферийный интерфейс USART0 поддерживает протокол I2C спецификации v2.1

![image-20200227093854617](C:\Users\vm\AppData\Roaming\Typora\typora-user-images\image-20200227093854617.png)

##### Арбитраж

Арбитраж выигрывает то устройство, которое передает на шине байт с меньшим абсолютным значением 

Если 2 или более устройств посылают одинаковые первые байты, арбитраж продолжается на последующих

Скорость передачи (t SCL) = t I2CIN / (I2C PSC+1) (I2CSCLM+2+I2CSCLL+2)



