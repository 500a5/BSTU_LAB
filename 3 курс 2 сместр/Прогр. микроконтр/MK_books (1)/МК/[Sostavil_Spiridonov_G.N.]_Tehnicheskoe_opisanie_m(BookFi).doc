
	Техническое описание микроконтроллеров
	КР1816ВЕ51, КМ1816ВЕ51, КМ1816ВЕ751, КР1816ВЕ31.

	Составил Спиридонов Г.Н.  тел. 434-9673

	1. ВВЕДЕНИЕ.
	2. ТЕХНИЧЕСКИЕ ХАРАКТЕРИСТИКИ.

		2.1 Расположение и обозначение выводов.
		2.2	Назначение выводов.
		2.3 Электрические параметры.

	3. ОРГАНИЗАЦИЯ ПАМЯТИ ПРОЦЕССОРА.

		3.1 План памяти.
		3.2 Память данных.
		3.3 Временные характеристики работы с памятью команд.
		3.4 Временные характеристики работы с памятью данных.

	4. РЕГИСТРЫ ЦПУ.

		4.1 Слово состояния процессора.
		4.2 Другие регистры ЦПУ.
		4.3 Порты ввода/вывода.

			4.3.1 Структура порта P3.

		4.4 Таймеры/счетчики.

			4.4.1 Регистр задания режимов TMOD.
			4.4.2 Регистр управления TCON.

		4.5 Интерфейс последовательного ввода/вывода.

			4.5.1 Регистр управления последовательного
			      ввода/вывода SCON.
			4.5.2 Описание режимов работы.

	5. СИСТЕМА ПРЕРЫВАНИЙ.

		5.1 Источники прерываний.
		5.2 Регистр разрешения прерываний IE.
		5.3 Регистр управления приоритетами IP.
		5.4 Начальные адреса процедур обработки прерываний.
		5.5 Временные соотношения в системе прерываний.
		5.6 Прерывания от внешних источников.

	6. УСТАНОВКА ПРОЦЕССОРА В ИСХОДНОЕ СОСТОЯНИЕ.

	7. КОМАНДЫ ПРОЦЕССОРА.

		7.1 Список команд процессора.
		7.2 Таблица шестнадцатиричных кодов команд.
		7.3 Описание команд.

			7.3.1 Арифметические команды
			7.3.2 Логические операции.
			7.3.3 Команды передачи данных.
			7.3.4 Команды переходов.
			7.3.5 Команды битовой обработки.



				1. ВВЕДЕНИЕ.

	КР1816ВЕ51  - масочно программируемый с объемом ПЗУ 4096 байт.
	КМ1816ВЕ51  - однократно программируемое ПЗУ объемом 4096 байт.
	КМ1816ВЕ751 - ультрафиолетовое СППЗУ объемом 4096 байт.
	КР1816ВЕ31  - не содержит встроенной памяти программ.

	Все типы процессоров имеют встроенное ОЗУ объемом 128 байт,
	позволяют расширять память пргограмм и ОЗУ до 64К за счет
	внешних кристаллов памяти.

	Архитектура процессоров содержит:
		- двадцать регистров специального назначения,
		- четыре банка рабочих регистров,
		- стек с максимальной глубиной 128 байт,
		- 128 контролируемых отдельных разрядов,
		- 32 двунаправленные линии ввода/вывода, организованные
	в четыре 8-разрядных порта,
		- программируемый мультиплексный последовательный порт,
		- два 16-разрядных таймера/счетчика,
		- двухуровневая система прерываний,
		- 5 источников прерываний,
		- вложенная система прерываний.

	Расширенная система команд, обеспечивающая:
		- прямую повайтовую и побитовую адресацию,
		- двоичную и двоично-десятичную арифметику,
		- контроль переполнения и четности/нечетности,

	Длительность цикла команды - 1 мкс, при тактовой частоте 16 МГц.

			 2. ТЕХНИЧЕСКИЕ ХАРАКТЕРИСТИКИ.

		2.1 Расположение и обозначение выводов.

			     ┌────────┬─┬────────┐
		      P1.0  ─┤ 1      └─┘     40 ├─   Ucc
		      P1.1  ─┤ 2              39 ├─   P0.0
		      P1.2  ─┤ 3              38 ├─   P0.1
		      P1.3  ─┤ 4              37 ├─   P0.2
		      P1.4  ─┤ 5              36 ├─   P0.3
		      P1.5  ─┤ 6              35 ├─   P0.4
		      P1.6  ─┤ 7              34 ├─   P0.5
		      P1.7  ─┤ 8              33 ├─   P0.6
		   RST/Upd  ─┤ 9              32 ├─   P0.7
		 RXD  P3.0  ─┤ 10             31 ├─   EA/Udd
		 TXD  P3.1  ─┤ 11             30 ├─   ALE/PROG
		 INT0 P3.2  ─┤ 12             29 ├─   PSEN
		 INT1 P3.3  ─┤ 13             28 ├─   P2.7
		   T0 P3.4  ─┤ 14             27 ├─   P2.6
		   T1 P3.5  ─┤ 15             26 ├─   P2.5
		   WR P3.6  ─┤ 16             25 ├─   P2.4
		   RD P3.7  ─┤ 17             24 ├─   P2.3
		     XTAL1  ─┤ 18             23 ├─   P2.2
		     XTAL2  ─┤ 19             22 ├─   P2.1
		       GND  ─┤ 20             21 ├─   P2.0
	                     └───────────────────┘




		2.2	Назначение выводов.

	┌────────────┬───────┬────────────────────────────────────────────┐
	│ Обозначение│ Вывод │               Функция                      │
	├────────────┼───────┼────────────────────────────────────────────┤
	│ P0.0-P0.7  │ 39-32 │ Порт 0. Мультиплексная передача данных     │
        │            │       │  и младших разрядов адреса.                │
	│ P1.0-P1.7  │  1-8  │ Порт 1. Квазидвунаправленный порт.         │
	│ P2.0-P2.7  │ 21-28 │ Порт 2. Квазидвунаправленный порт.         │
	│            │       │ Передача старших разрядов адреса.          │
	│ P3.0-P3.7  │ 10-17 │ Порт 3. Квазидвунаправленный порт.         │
	│            │       │ Выдача управляющих сигналов:               │
	│            │       │  - RXD (P3.0) Прием последовательного      │
	│            │       │ кода (асинхронный режим) или ввод/вывод    │
	│            │       │ данных (синхронный режим).                 │
	│            │       │  - TXD (P3.1) Передача последовательного   │
	│            │       │ кода (асинхронный режим) или вывод         │
	│            │       │ синхросигналов (синхронный режим).         │
	│            │       │  - INT0 (P3.2) Вход внешнего прерывания 0  │
	│            │       │ или сигнал управления счетчиком 0.         │
	│            │       │  - INT1 (P3.3) Вход внешнего прерывания 1  │
	│            │       │ или сигнал управления счетчиком 1.         │
	│            │       │  - T0 (P3.4) Вход счетчика событий 0.      │
	│            │       │  - T1 (P3.5) Вход счетчика событий 1.      │
	│            │       │  - WR (P3.6) Строб записи во внешнее ОЗУ.  │
	│            │       │  - RD (P3.7) Строб чтения из внешнего ОЗУ. │
	│ ALE/PROG   │ 30    │ Строб фиксации адреса.                     │
	│ PSEN       │ 29    │ Строб чтения из внешнего ПЗУ команд.       │
	│ EA/Udd     │ 31    │ При подаче на вход EA "1" TTL уровня       │
	│            │       │ выполняются команды из встроенного ПЗУ,    │
	│            │       │ если адрес в PC меньше 4096. При подаче    │
	│            │       │ "0" TTL уровня выполняются команды из      │
	│            │       │ внешнего ПЗУ команд с адресами 0-64K.      │
	│ RST/Upd    │  9    │ Сброс/аварийный источник питания.          │
	│ XTAL1      │ 19    │ Выход тактового генератора, заземляется    │
	│            │       │ при использовании внешнего генератора.     │
	│ XTAL2      │ 18    │ Вход тактового генератора. Вход при        │
	│            │       │ использовании внешнего генератора.         │
	│ Ucc        │ 40    │ Напряжение питания +5В.                    │
	│ GND        │ 20    │ Земля.                                     │
	└────────────┴───────┴────────────────────────────────────────────┘

		2.3 Электрические параметры.

	Напряжение питания		Ucc  5В ё 5%.
	Частота тактового генератора	от 1.2 до 12 МГц.


	Предельно допустимые режимы эксплуатации.

	Диапазон рабочих температур	от 0°С до 70°С.
	Напряжение на любом выводе
	относительно земли		-0.5 - +7В.
	Мощность рассеивания		2 Вт.



	Статические параметры.

	┌──────────────────────┬────────────┬─────────────────┬──────────────┐
	│                      │            │     Значения    │              │
	│      Параметры       │  Единицы   ├──────┬──────────┤  Примечание  │
	│                      │ измерения  │  не  │    не    │              │
	│                      │            │менее │  более   │              │
	├──────────────────────┼───┬────────┼──────┼──────────┼──────────────┤
	│ Входное напряжение   │   │        │      │          │              │
        │ низкого уровня:      │   │        │      │          │              │
	│ - XTAL1              │ В │U1l1    │-0.5  │          │              │
	│ - прочих             │ В │U1l     │-0.5  │  0.8     │              │
	│                      │   │        │      │          │              │
	│ Входное напряжение   │   │        │      │          │              │
	│ высокого уровня:     │   │        │      │          │              │
	│ - XTAL1              │ В │U1h1    │      │ Ucc+0.5  │              │
	│ - RST                │ В │U1h2    │ 3.0  │ Ucc+0.5  │              │
	│ - Upd                │ В │U1h3    │ 4,5  │   5.5    │  Ucc=0       │
	│ - прочих             │ В │U1h     │ 2,0  │ Ucc+0.5  │              │
	│                      │   │        │      │          │              │
	│ Выходное напряжение  │   │        │      │          │              │
	│ низкого уровня:      │   │        │      │          │              │
	│ - порт 0             │ В │U0l1    │      │   0.45   │  I0l=4 ма    │
	│ - прочих             │ В │U0l     │      │   0.45   │  I0l=2 ма    │
	│                      │   │        │      │          │              │
	│ Выходное напряжение  │   │        │      │          │              │
	│ высокого уровня:     │   │        │      │          │              │
	│ - ALE, PSEN, порт 0  │ В │U0h1    │ 2.4  │          │  I0h=-0.4 ма │
	│ - прочих             │ В │U0h     │ 2.4  │          │  I0h=-0.1 ма │
	│                      │   │        │      │          │              │
	│ Выходной ток портов  │   │        │      │          │              │
	│ - P1, P2, P3         │мка│Il0     │      │   500    │0.45ВєUвхєUcc │
	│                      │   │        │      │          │              │
	│ Выходной ток утечки  │   │        │      │          │              │
	│ - порт 0             │мка│Il01    │      │   ё10    │0.45ВєUвхєUcc │
	│                      │   │        │      │          │              │
	│ Потребляемый ток     │ма │Icc     │      │   150    │   Ta=25°C    │
	│                      │   │        │      │          │              │
	│ Потребляемый ток по  │   │        │      │          │              │
	│ выводу Upd           │ма │Ipd     │      │   20     │   Ta=25°C    │
	│                      │   │        │      │          │              │
	│ Емкость ввода/вывода │пф │Cio     │      │   10     │    Fc=1 МГц  │
	└──────────────────────┴───┴────────┴──────┴──────────┴──────────────┘



			3. ОРГАНИЗАЦИЯ ПАМЯТИ ПРОЦЕССОРА.

		3.1 План памяти.

       ┌────────────┐                                      ┌────────────┐
 65535 │            │                                65535 │            │
       │   Внешняя  │                                      │  Внешняя   │
       │   память   │                                      │  память    │
       │            │                                      │  данных    │
       │            │                                      │            │
       │            │                                      │            │
       │            │                                      │            │
  4096 │            │                                      │            │
       ├────────────┤  ┌────────────┐      ┌────────────┐  │            │
  4095 │            │  │            │  255 │  Регистры  │  │            │
       │   Внешняя  │  │ Встроенная │      │специального│  │            │
       │   память   │  │   память   │  128 │ назначения │  │            │
       │            │  │            │      ├────────────┤  │            │
       │            │  │            │  127 │            │  │            │
       │   (EA=0)   │  │  (EA=1)    │      │    ОЗУ     │  │            │
       │            │  │            │      │            │  │            │
  0000 │            │  │            │  000 │            │  │            │
       └────────────┴──┴────────────┴──────┴────────────┴──┴────────────┘
              Память программ                      Память данных

		3.2 Память данных.

	Адреса встроенного ОЗУ:

	00-07h -	0 банк регистров,
	08-0Fh -	1 банк регистров,
	10-17h -	2 банк регистров,
	18-1Fh -	3 банк регистров,
	20-2Fh -	ячейки памяти с доступом к отдельным разрядам,
	30-7Fh -	ячейки памяти (как правило часть исползуется под стек),
	   80h - P0	порт 0 (bit),
	   81h - SP	указатель стека,
	   82h - DPL	младший байт регистра-указателя DPTR,
	   83h - DPH	старший байт регистра-указателя DPTR,
	   88h - TCON	регистр управления работой таймеров/счетчиков (bit),
	   89h - TMOD	регистр задания режима работы таймеров/счетчиков,
	   8Ah - TL0	младший байт таймера/счетчика 0,
	   8Bh - TL1	младший байт таймера/счетчика 1,
	   8Ch - TH0	старший байт таймера/счетчика 0,
	   8Dh - TH1	старший байт таймера/счетчика 1,
	   90h - P1	порт 1 (bit),
	   98h - SCON	регистр управления последовательным портом (bit),
	   99h - SBUF	буферный регистр последовательного порта,
	   A0h - P2	порт 2 (bit),
	   A8h - IE	регистр разрешения/запрещения прерываний (bit),
	   B0h - P3	порт 3 (bit),
	   B8h - IP	регистр управления приоритетом прерываний (bit),
	   D0h - PSW	слово состояния процессора (bit),
	   E0h - ACC	аккумулятор (bit),
	   F0h - B	арифметический регистр для операций MUL и DIV (bit).

	(bit) - к этим регистрам возможна битовая адресация.
	К неуказанным в списке ячейкам доступ отсутствует.


	При поступлении напряжения высокого уровня на вход EA обеспечивается
	выборка команд из ячеек с 0 по 4095 встроенной памяти, а начиная с
	ячейки 4096 по 65535, из внешней памяти команд. При этом на P0 и P2
	выводится код адреса. Если вся программа размещается в пределах
	встроенного ПЗУ, ячейка 4095 должна быть свободной для предотврашения
	нежелательного перехода к выборке из внешней памяти команд.
	Подача на вывод EA напряжения низкого уровня переводит процессор в
	режим выборки команд из внешнего ПЗУ с адресами от 0 до 65535.
	Время выборки команд из встроенной и внешней памяти одинаково.

	Доступ к ячейкам внешнего ОЗУ осушествляется командой MOVX,при
	чтении вырабатывается строб RD, при записи WR. Внешнюю память
	данных удобно расширять страницами по 256 байт каждая, при этом
	в качестве управляющего используется порт P2.

		3.3 Временные характеристики работы с памятью команд.

	┌──────────────────────────┬─────────┬───────────────┬───────────────┐
	│                          │         │ Значения при  │ Значения при  │
	│                          │         │   Fc=12 МГц   │ 1.2єFcє12МГц  │
	│      Параметры           │ Единицы ├───────┬───────┼───────┬───────┤
	│                          │измерения│  не   │  не   │  не   │  не   │
	│                          │         │ менее │ более │ менее │ более │
	├──────────────────────────┼───┬─────┼───────┼───────┼───────┼───────┤
	│ Период тактового сигнала │нс │ Tc  │  83   │       │       │       │
        │                          │   │     │       │       │       │       │
	│ Длительность командного  │мкс│ Tcy │   1   │       │ 12Tc  │ 12Tc  │
	│ цикла                    │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Длительность сигнала ALE │нс │Tlhll│  140  │       │ 2Tc-30│       │
	│                          │   │     │       │       │       │       │
	│ Установка кода адреса в  │нс │Tavll│   60  │       │ Tc-25 │       │
	│ пределах ALE             │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Время сохранения адреса  │нс │Tllax│   50  │       │ Tc-35 │       │
	│ после сигнала ALE        │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Длительность сигн PSEN   │нс │Tplph│  230  │       │ 3Tc-20│       │
	│                          │   │     │       │       │       │       │
	│ Длительность цикла       │нс │Tlhlh│  500  │       │  6Tc  │       │
	│ сигналов ALE, PSEN       │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Задержка установки кода  │нс │Tpliv│       │  150  │3Tc-100│       │
	│ команды относительно     │   │     │       │       │       │       │
	│ установки сигнала PSEN   │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Время сохранения кода    │нс │Tphdx│   0   │       │   0   │       │
	│ команды после сигн PSEN  │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Максимальная задержка    │нс │Tphdz│       │   75  │       │ Tc-10 │
	│ сохранения кода команды  │   │     │       │       │       │       │
	│ после сигнала PSEN       │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Время установки адреса   │нс │Taviv│       │  320  │       │5Tc-100│
	│ перед установкой команды │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Время сохранения адреса  │нс │     │  0    │       │   0   │       │
	│ перед сигналом PSEN      │   │     │       │       │       │       │
	└──────────────────────────┴───┴─────┴───────┴───────┴───────┴───────┘


		3.4 Временные характеристики работы с памятью данных.

	┌──────────────────────────┬─────────┬───────────────┬───────────────┐
	│                          │         │ Значения при  │ Значения при  │
	│                          │         │   Fc=12 МГц   │ 1.2єFcє12МГц  │
	│      Параметры           │ Единицы ├───────┬───────┼───────┬───────┤
	│                          │измерения│  не   │  не   │  не   │  не   │
	│                          │         │ менее │ более │ менее │ более │
	├──────────────────────────┼───┬─────┼───────┼───────┼───────┼───────┤
	│ Длительность импульса RD │нс │Trlrh│  400  │       │6Tc-100│       │
        │                          │   │     │       │       │       │       │
	│ Длительность импульса WR │нс │Twlwh│  400  │       │6Tc-100│       │
	│                          │   │     │       │       │       │       │
	│ Время ожидания импульса  │нс │Trldv│       │  250  │5Tc-170│       │
	│ RD перед подачей кода    │   │     │       │       │       │       │
	│ данных на вход порта P0  │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Время сохранения кода    │нс │Trhdx│   0   │       │   0   │       │
	│ данных после окончания   │   │     │       │       │       │       │
	│ импульса RD              │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Максимальная задержка    │нс │Trhdz│       │  100  │       │2Tc-70 │
	│ сохранения данных после  │   │     │       │       │       │       │
	│ окончания импульса RD    │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Время опережения установ-│нс │Tavdv│       │  600  │       │9Tc-150│
	│ ки адреса перед установ- │   │     │       │       │       │       │
	│ кой данных на входе P0   │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Время ожидания установки │нс │Tavwl│  200  │       │4Tc-130│       │
	│ адреса по отношению к    │   │     │       │       │       │       │
	│ установке сигналов WR,RD │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Время сохранения данных  │нс │Tqvwh│  400  │       │7Tc-180│       │
	│ до окончания сигнала WR  │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Время сохранения данных  │нс │Twhqx│   80  │       │2Tc-90 │       │
	│ после окончания WR       │   │     │       │       │       │       │
	│                          │   │     │       │       │       │       │
	│ Время опережения подачи  │нс │Tdvwx│       │       │       │       │
	│ данных по отношению  к   │   │     │       │       │       │       │
	│ фронту сигнала WR        │   │     │       │       │       │       │
	└──────────────────────────┴───┴─────┴───────┴───────┴───────┴───────┘



				4. РЕГИСТРЫ ЦПУ.

		4.1 Слово состояния процессора.

           7     6     5     4     3     2     1     0
	┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐
	│  C  │ AC  │ F0  │ RS1 │ RS0 │ OV  │ --- │  P  │
	└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘

	Назначение разрядов:

	C    PSW.7  Флаг переноса.
	AC   PSW.6  Флаг промежуточного переноса из 3 в 4 разряд и наоборот.
	F0   PSW.5  Флаг установливается/сбрасывается только пользователем.
	RS1  PSW.4  Разряды управления выбором номера банка рабочих регис-
	RS0  PSW.3  торов. Устанавливаются/сбрасываются программно.
	OV   PSW.2  Флаг переполнения.
	---  PSW.1  Резервный разряд, установлен в единицу.
	P    PSW.0  Флаг четности. Обновляется в каждом цикле, индицирует
		    четность/нечетность единиц в аккумуляторе.


	Точка в нутри записи PSW.X, элемент мнемоники ассемблера, обозначает
	битовую адресацию внутри байта. Используется для всех регистров
	специального назначения.
	Бит переноса C используется также, в качестве "логического аккуму-
	лятора" при битовых операциях.
	Флаг переполнения устанавливается при операциях над целыми числами
	со знаком.

		4.2 Другие регистры ЦПУ.

	Регистр B используется в операциях умножения и деления. В других
	операциях является обычным регистром специального назначения.
	Восмиразрядный указатель стека (SP) содержит адрес последнего байта
	записанного в стек. При сбросе принимает значение 07h, поэтому
	первая операция засылки в стек использует ячейку 08h. Программно
	изменяя SP можно переместить область стека в любое место 128 байтной
	области встроенного ОЗУ.
	Шестнадцати разрядный регистр-указатель DPTR служит базовым регистром
	при косвенной адресации к памяти команд и данных в диапазоне 64K.
	Старший и младший байты DPH и DPL регистра-указателя можно исполь-
	зовать по отдельности.

		4.3 Порты ввода/вывода.

	Для ввода/вывода предназначены порты P0, P1, P2, P3. Каждая линия
	любого порта может использоваться для ввода и вывода независимо от
	других линий. Порт P0 служит для выдачи младших разрядов адреса и
	ввода/вывода байта данных при обращении к внешней памяти команд и
	данных. Через порт P2 выдаются старшие разряды данных. Фиксация
	адреса производится задним фронтом сигнала ALE.	Обращение к памяти
	команд сопровождается стробом PSEN, к памяти данных RD или WR. Если
	внешняя память команд и данных отсутствует, эти два порта можно
	использовать для фиксированного ввода/вывода, при этом выходы порта
	P0 необходимо подключить через резисторы к источнику +5В. При исполь-
	зовании для ввода отдельных или всех линий любого порта P0, P1, P2, P3


	предварительно необходимо эти линии установить в "1". Порты P1, P2, P3
	могут управляться от ТТЛ или КМОП элементов. Нагрузочная способность
	этих портов 1 стандартный ТТЛ вход. Для порта P0 2 ТТЛ входа. При
	использовании команд ANL, ORL, XRL, JBC, CPL, INC, DEC, DJNZ,
	MOV PX.Y,C, CLR PX.Y, SET PX.Y для обрашения к портам, информация
	считывается не с выводов процессора, а с внутренних регистров портов.
	Ввод данных через порты производится по заднему фронту сигнала ALE.
	Линии порта P3 кроме обычного ввода/вывода могут выполнять специаль-
	ные функции.

	4.3.1 Структура порта P3.

           7     6     5     4     3     2     1     0
	┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐
	│ RD  │ WR  │ T1  │ T0  │INT1 │INT0 │ TXD │ RXD │
	└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘

	Назначение разрядов порта P3.

	RD    P3.7  Строб чтения из внешней памяти данных. Активный уровень 0.
	WR    P3.6  Строб записи из внешней памяти данных. Активный уровень 0.
	T1    P3.5  Вход таймера/счетчика 1 или тестовый вход 1.
	T0    P3.4  Вход таймера/счетчика 0 или тестовый вход 0.
	INT1  P3.3  Запрос прерывания 1. Активный уровень 0 или падающий фронт.
	INT0  P3.2  Запрос прерывания 0. Активный уровень 0 или падающий фронт.
	TXD   P3.1  Выход передатчика (асинх реж), синхросигнал (синхр реж).
	RXD   P3.0  Вход приемника (асинх реж), ввод/вывод (синхр реж).


		4.4 Таймеры/счетчики.

	Два независимых 16-разрядных таймера/счетчика могут программироваться
	с помощью регистра режимов TMOD. Управление таймерами осуществляет
	регистр TCON. Таймеры способны измерять интервалы времени длитель-
	ностью менее 65 мс с точностью 1 мкс, подсчитывать внешние сигналы с
	частотой до 500 КГц.

	4.4.1 Регистр задания режимов TMOD.

           7     6     5     4     3     2     1     0
	┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐
	│GATE1│ C/T │ M1  │ M0  │GATE0│ C/T │ M1  │ M0  │
	└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘
	 <----   таймер 1  ----> <----   таймер 0  ---->

	GATE  TMOD.7(3) Если GATE установлен в "1", таймер/счетчик запускает-
			ся, при наличае на входе INT1(0) "1" и установленном
			флаге TR1(0). Если GATE сброшен в "0", таймер/счетчик
			запускается при установленном флаге TR1(0).
	C/T   TMOD.6(2) Если разряд установлен в "0", то режим работы таймера
			от внутренней синхронизации с T=Tc/12, если "1", то
			режим счетчика сигналов со входа T1(0).
	M1    TMOD.5(1) Задание режима работы. Для каждого канала
	M0    TMOD.4(0) задается индивидуально.



	Режимы работы.

	M1 M0		Режим.
	 0  0		Режим 0. Регистр TL1(0) служит в качестве 5-разрядного
			делителя на 32, для предварительного масштабирования.
			Регистр TH1(0) рабочий регистр таймера/счетчика.
	 0  1		Режим 1. 16-разрядный таймер/счетчик. Рабочие регистры
			TH1,TL1 (TH0,TL0).
	 1  0		Режим 2. 8-разрядный автоматически перезагружающийся
			таймер/счетчик. Регистр TH1(0) содержит величину
			которая перезагружается в TL1(0) каждый раз, когда
			происходит переполнение.
	 1  1		Режим 3. Канал 0. Регистр TL0 8-разрядный таймер/счет-
			чик, управляемый кодом рзрядов 0-3 регистра TMOD.
			Регистр TH0 8-разрядный таймер, управляемый кодом
			разрядов 4-7 регистра TMOD.
			Когда счетчик 0 установлен в режим 3, счетчик 1 может
			быть установлен на работу в любом режиме, однако
			счетчик 1 не может установить флаг запроса прерывания
			или генерировать прерывание.
			         Канал 1. Таймер/счетик 1 остановлен.

	Сигналом RST все разряды регистра TMOD сбрасываются в 0.


	4.4.2 Регистр управления TCON.

           7     6     5     4     3     2     1     0
	┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐
	│ TF1 │ TR1 │ TF0 │ TR0 │ IE1 │ IT1 │ IE0 │ IT0 │
	└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘

	TF1  TCON.7 Флаг переполнения таймера 1. Сбрасывается при передаче
		    управления в процедуру прерывания.
	TR1  TCON.6 Управление запуском таймера 1. Устанавливается программно.
	TF0  TCON.5 Флаг переполнения таймера 0. Сбрасывается при передаче
		    управления в процедуру прерывания.
	TR0  TCON.4 Управление запуском таймера 0. Устанавливается программно.
	IE1  TCON.3 Флаг запроса внешнего прерывания INT1. Сбрасывается при
		    передаче управления в процедуру прерывания.
	IT1  TCON.2 Разрешение прерывания INT1. Устанавливается программно.
	IE0  TCON.1 Флаг запроса внешнего прерывания INT0. Сбрасывается при
		    передаче управления в процедуру прерывания.
	IT0  TCON.0 Разрешение прерывания INT0. Устанавливается программно.


		4.5 Интерфейс последовательного ввода/вывода.

	Порт ввода/вывода используется в асинхронном режиме для связи с
	устройствами интерфейса RS-232C, в синхронном режиме для расширения
	количества линий ввода/вывода с использованием внешних сдвиговых
	регистров.


	4.5.1 Регистр управления последовательного ввода/вывода SCON.

           7     6     5     4     3     2     1     0
	┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐
	│ SM0 │ SM1 │ SM2 │ REN │ TB8 │ RB8 │ TI  │ RI  │
	└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘

	SM0  SCON.7 Два разряда задания режима работы.
	SM1  SCON.6
	SM2  SCON.5 Для асинхронной передачи. Если установлен в "1", то запре-
		    щается прием кодов у которых бит 8 равен 0.
	REN  SCON.4 Если установлен в "1", то разрешает последовательный прием
		    данных.
	TB8  SCON.3 Флаг 8 в режиме передачи. Устанавливается/сбрасывается
		    аппаратно для определения состояния 9 разряда данных,
		    передаваемых в режиме 9-разрядного асинхронного приемо/
	            передатчика.
	RB8  SCON.2 Флаг 8 в режиме приема. Устанавливается/сбрасывается
		    аппаратно для индикации состояния 9 разряда данных.
	TI   SCON.1 Флаг прерывания передачи. Устанавливается аппаратно, когда
		    байт данных передан. Сбрасывается программно процедурой
		    обработки прерывания.
	RI   SCON.0 Флаг прерывания приема. Устанавливается аппаратно, когда
		    байт данных принят. Сбрасывается программно процедурой
		    обработки прерывания.

	Режимы работы.

	SM0 SM1		Режим.
	 0   0		Сдвиговый регистр расширения ввода/вывода.
	 0   1		8-разрядный асинхронный приемо/передатчик.
			Скорость передачи программируется.
	 1   0		9-разрядный асинхронный приемо/передатчик.
			Скорость передачи фиксированная.
	 1   1		9-разрядный асинхронный приемо/передатчик.
			Скорость передачи программируется.

	4.5.2 Описание режимов работы.

	Асинхронный ввод/вывод производится через выводы RXD (прием) и TXD
	(пердача). Данные приема и передачи хранятся в регистре SBUF, который
	реально представляет два регистра (регистр приема и регистр передачи).
	Приемник способен принимать новый байт до того, как считан предыдущий.
	Если предыдущий байт не будет считан к моменту окончания приема теку-
	щего, то произойдет потеря предыдущего байта.
	При установке в "1" флага REN инициализируется генератор скорости
	передачи, происходит разрешение приема. Если REN "0", прием запрещен.
	Флаг TI устанавливается когда буфер передатчика пуст. Флаг RI устана-
	вливается когда полон буфер приема. Флаги TI и RI должны сбрасываться
	в процедуре обработки прерывания, чтобы избежать повторного прерыва-
	ния. В режиме 0 вывод RXD используется для сдвига 8 разрядов данных
	во внешний или из внешнего регистра младшими разрядами в перед.
	Сигнал синхронизации передается через вывод TXD с частотой 1/12 Tc.
	В режиме 1 прием/передача 10 битов информации: 1 стартовый, 8 бит
	данных, 1 стоповый. При приеме стоповый бит поступает в RB8 регистра
	SCON. В режиме 2 прием/передача 11 битов: 1 стартовый, 8 бит данных,
	программируемый 9 бит из TB8 регистра SCON, 1 стоповый. При приеме
	9 бит поступает в RB8 регистра SCON. Скорость передачи в этом режиме
	составляет 1/32 и 1/64 Tc. Режим 3, это режим 2 с программируемой
	скоростью передачи.


	Пример программы использования 9 бита в 11-битовой посылке, как пари-
	тетного:	MOV	C,P	(байт данных в аккумуляторе)
			MOV	TB8,C
			MOV	SBUF,A


				5. СИСТЕМА ПРЕРЫВАНИЙ.

	В системе прерываний процессора имеются 5 источников прерываний:
		2 тиймера/счетчика,
		2 внешних запроса прерываний,
		порт последовательного ввода/вывода генерирует одно прерыва-
		ние по вводу и повыводу

		5.1 Источники прерываний.

	IE0  TCON.1 Внешний запрос прерывания 0.
	IE1  TCON.3 Внешний запрос прерывания 1.
	TF0  TCON.5 Таймер/счетчик 0.
	TF1  TCON.7 Таймер/счетчик 1.
	RI   SCON.0 Асинхронный приемник.
	TI   SCON.1 Асинхронный передатчик.

	Прерывания от каждого источника разрешается независимо и каждому
	источнику может быть присвоен один из двух уровней прерывания,
	высокий и низкий. Управление системой прерывания обеспечивается
	регистрами IE (разрешение прерываний) и IP (уровень прерываний).

		5.2 Регистр разрешения прерываний IE.

           7     6     5     4     3     2     1     0
	┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐
	│ EA  │ --- │ --- │ ES  │ ET1 │ EX1 │ ET0 │ EX0 │
	└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘

	EA   IE.7  Если EA установлен в "1", разрешены прерывания согласно
		   состояниям разрядов IE.4-IE.0. Если установлен в "0", то
		   запрещены любые преревания независимо от IE.4-IE.0.
	---  IE.4  Не используется.
	---  IE.5  Не используется.
	ES   IE.4  Разрешение прерывания по флагам TI, RI         (актв. "1").
	ET1  IE.3  Разрешение прерывания по таймеру/счетчику 1    (актв. "1").
	EX1  IE.2  Разрешение по входу INT1                       (актв. "1").
	ET0  IE.1  Разрешение прерывания по таймеру/счетчику 0    (актв. "1").
	EX0  IE.0  Разрешение по входу INT0                       (актв. "1").


		5.3 Регистр управления приоритетами IP.

           7     6     5     4     3     2     1     0
	┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐
	│ --- │ --- │ --- │ PS  │ PT1 │ PX1 │ PT0 │ PX0 │
	└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘

	---  IP.7  Не используется.
	---  IP.6  Не используется.
	---  IP.5  Не используется.
	PS   IP.4  Последовательный порт ( 1 - высокий приоритет, 0 - низкий).
	PT1  IP.3  Таймер/счетчик 1      ( 1 - высокий приоритет, 0 - низкий).
	PX1  IP.2  Внешнее прерывание 1  ( 1 - высокий приоритет, 0 - низкий).
	PT0  IP.1  Таймер/счетчик 0      ( 1 - высокий приоритет, 0 - низкий).
	PX0  IP.0  Внешнее прерывание 0  ( 1 - высокий приоритет, 0 - низкий).

		5.4 Начальные адреса процедур обработки прерываний.

		 0 (0000h) - адрес старта по сигналу RST,
		 3 (0003h) - внешний запрос прерывания 0,
		11 (000Вh) - прерывание встроенного таймера/счетчика 0,
		19 (0013h) - внешний запрос прерывания 1,
		27 (001Bh) - прерывание встроенного таймера/счетчика 1,
		35 (0023h) - прерывание встроенного порта ввода/вывода.

	Источник прерывания с высоким приоритетом может прервать процедуру
	обработки прерывания с низким приоритетом, однако запрос прерывания
	не может прервать процедуру прерывания с тем же или более высоким
	уровнем. Если запросы прерываний с одинаковыми уровнями приходят одно-
	временно, то запросы обслуживаются в следующем порядке:

	PX0  IP.0 Внешний запрос прерывания 0    0 высший.
	PT0  IP.1 Таймер/счетчик 0               1.
	PX1  IP.2 Внешний запрос прерывания 1    2.
	PT1  IP.3 Таймер/счетчик 1               3.
	PS   IP.4 Последовательный порт          4 низший.


		5.5 Временные соотношения в системе прерываний.

	Запросы прерываний фиксируются по заднему фронту сигнала ALE в 10, 22,
	34 или 46-ом такте текущей команды. При переходе в процедуру прерыва-
	ния флаг вызвавший прерывание сбрасывается в "0", кроме флагов TI, RI,
	которые сбрасываются программно. Процедуры прерываний должны заканчи-
	ваться командой RETI. Запрос прерывания	с наивысшим приоритетом будет
	обслуживаться в конце текущей команды. Однако, если запрос поступил в
	течении последних 14-ти тактов команды, до начала обработки прерывания
	будет выполнена следующая команда текущей программы. Первая команда
	процедуры прерывания будет выполняться через 24 такта после окончания
	текущей команды. Таким образом максимальная задержка на запрос преры-
	вания состовляет 86 тактов (приблизительно 7 мкс при Tc=12 МГц).
	Минимальная задержка состовляет 38 тактов.


		5.6 Прерывания от внешних источников.

	Входы внешних прерываний INT0 и INT1 могут быть запрограммированны на
	работу по уровню или по заднему фронту (перепаду из "1" в "0") вход-
	ного сигнала прерывания. Управление приемом внешних прерываний осу-
	ществляется 4-мя младшими разрядами регистра TCON.

	IE1  TCON.3  Флаг запроса внешнего прерывания 1.
	IT1  TCON.2  Если IT1 в "1" срабатывание по фронту INT1.
	IE0  TCON.1  Флаг запроса внешнего прерывания 0.
	IT0  TCON.0  Если IT0 в "1" срабатывание по фронту INT0.

	Если входы INT0, INT1 запрограммированы на срабатывание по фронту, то
	низкий уровень запроса прерывания должен удерживаться на них не	менее
	12-ти тактов. Новый запрос может идти через паузу высокого уровня не
	менее 12 тактов. В этом режиме устанавливаются флаги IE0, IE1.
	Если входы INT0, INT1 запрограммированы на срабатывание по уровню, то
	прерывание выполняется, если за 14 тактов до окончания текущей коман-
	ды на этих входах низкий уровень. В этом состоянии они могут находить-
	ся до окончания процедуры обработки прерывания, однако прежде чем она
	закончится вход соответствующего запроса должен быть переведен в высо-
	кий уровень во избежание повторного прерывания. В этом режиме прерыва-
	ния не влияют на флаги IE0, IE1.


		6. УСТАНОВКА ПРОЦЕССОРА В ИСХОДНОЕ СОСТОЯНИЕ.

	Сброс процессора производится подачей на вход RST высокого уровня
	на время не менее 24 тактов синхронизации. Сброс будет продолжаться
	до тех пор, пока уровень на RST не станет низким. Регистры сбрасы-
	ваются в следующие состояния:

	PC		0000h		TMOD		  00h
	A		  00h		TCON		  00h
	B		  00h		TH0		  00h
	PSW		  00h		TL0		  00h
	SP		  07h		TH1		  00h
	DPTR		0000h		TL1		  00h
	P0-P3		 0FFh		SCON		  00h
	IP	     XXX00000		SBUF	не определено
	IE	     0XX00000		PCON	     0XXXXXXX

	Сборс не влияет на содержимое ОЗУ.


			7. КОМАНДЫ ПРОЦЕССОРА.

		7.1 Список команд процессора.

	  команды	    байты такты	 	 команды	    байты такты
	ACALL	addr 11		2  24		MOV	Rr,dir		2  24
	ADD	A,Rr		1  12		MOV	Rr,#data	2  12
	ADD	A,dir		2  12		MOV	dir,A		2  12
	ADD	A,@Rr		1  12		MOV	dir,Rr		2  24
	ADD	A,#data		2  12		MOV	dir,dir		3  24
	ADDC	A,Rr		1  12		MOV	dir,@Rr		2  24
	ADDC	A,dir		2  12		MOV	dir,#data	3  24
	ADDC	A,@Rr		1  12		MOV	@Rr,A		1  12
	ADDC	A,#data		2  12		MOV	@Rr,dir		2  24
	AJMP	addr 11		2  24		MOV	@Rr,#data	2  12
	ANL	A,Rr		1  12		MOV	C,bit		2  12
	ANL	A,dir		2  12		MOV	bit,C		2  24
	ANL	A,@Rr		1  12		MOV	DPTR,#data 16	3  24
	ANL	A,#data		2  12		MOVC	A,@A+DPTR	1  24
	ANL	dir,A		2  12		MOVC	A,@A+PC		1  24
	ANL	dir,#data	3  24		MOVX	A,@Rr		1  24
	ANL	C,bit		2  24		MOVX	A,@DPTR		1  24
	ANL	C,/bit		2  24		MOVX	@Rr,A		1  24
	CJNE	A,dir,rel	3  24		MOVX	@DPTR,A		1  24
	CJNE	A,#data,rel	3  24		MUL	AB		1  48
	CJNE	Rr,#data,rel	3  24		NOP			1  12
	CJNE	@Rr,#data,rel	3  24		ORL	A,Rr		1  12
	CLR	A		1  12		ORL	A,dir		2  12
	CLR	bit		2  12		ORL	A,@Rr		1  12
	CLR	C		1  12		ORL	A,#data		2  12
	CPL	A		1  12		ORL	dir,A		2  12
	CPL	bit		2  12		ORL	dir,#data	3  24
	CPL	C		1  12		ORL	C,bit		2  24
	DA	A		1  12		ORL	C,/bit		2  24
	DEC	A		1  12		POP	dir		2  24
	DEC	Rr		1  12		PUSH	dir		2  24
	DEC	dir		2  12		RET			1  24
	DEC	@Rr		1  12		RETI			1  24
	DIV	AB		1  48		RL	A		1  12
	DJNZ	Rr,rel		3  24		RLC	A		1  12
	DJNZ	dir,rel		3  24		RR	A		1  12
	INC	A		1  12		RRC	A		1  12
	INC	Rr		1  12		SETB	C		1  12
	INC	dir		2  12		SETB	bit		2  12
	INC	@Rr		1  12		SJMP	rel		2  24
	INC	DPTR		1  24		SUBB	A,Rr		1  12
	JB	bit,rel		3  24		SUBB	A,dir		2  12
	JBC	bit,rel		3  24		SUBB	A,@Rr		1  12
	JC	rel		2  24		SUBB	A,#data		2  12
	JMP	@A+DPTR		1  24		SWAP	A		1  12
	JNB	bit,rel		3  24		XCH	A,Rr		1  12
	JNC	rel		2  24		XCH	A,dir		2  12
	JNZ	rel		2  24		XCH	A,@Rr		1  12
	JZ	rel		2  24		XCHD	A,@Rr		1  12
	LCALL	addr 16		3  24		XRL	A,Rr		1  12
	LJMP	addr 16		3  24		XRL	A,dir		2  12
	MOV	A,Rr		1  12		XRL	A,@Rr		1  12
	MOV	A,dir		2  12		XRL	A,#data		2  12
	MOV	A,@Rr		1  12		XRL	dir,A		2  12
	MOV	A,#data		2  12		XRL	dir,#data	3  24
	MOV	Rr,A		1  12


	A   		аккумулятор.
	B		арифметический регистр.
	Rr		рабочие регистры R0-R7.
	@Rr		рабочие регистры R0, R1, используются как индексные.
	C		бит переноса в PSW.
	#data		байт данных непосредственной адресации.
	#data16		слово данных непосредственной адресации.
	dir		прямо-адресуемые регистры и ячейки памяти.
	addr 11		11-разрядный исполнительный адрес.
	addr 16		16-разрядный исполнительный адрес.
	rel		8-разрядное смещение.
	bit		8-разрядный адрес прямо-адресуемого бита.
	PC		16-разрядный счетчик команд.
	DPTR		16-разрядный регистр-указатель данных.

		7.2 Таблица шестнадцатиричных кодов команд.

	┌───┬───────┬───────┬───────┬───────┬───────┬───────┬───────┬───────┐
	│   │   0   │   1   │   2   │   3   │   4   │   5   │   6   │   7   │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │NOP    │AJMP   │LJMP   │RR     │INC    │INC    │INC    │INC    │
	│ 0 │       │addr 11│addr 16│A      │A      │dir    │@R0    │@R1    │
	│   │       │(p000) │       │       │       │       │       │       │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │JBC    │ACALL  │LCALL  │RRC    │DEC    │DEC    │DEC    │DEC    │
	│ 1 │bit,   │addr 11│addr 16│A      │A      │dir    │@R0    │@R1    │
	│   │rel    │(p000) │       │       │       │       │       │       │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │JB     │AJMP   │RET    │RL     │ADD    │ADD    │ADD    │ADD    │
	│ 2 │bit,   │addr 11│       │A      │A,     │A,     │A,     │A,     │
	│   │rel    │(p001) │       │       │#data  │dir    │@R0    │@R1    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │JNB    │ACALL  │RETI   │RLC    │ADDC   │ADDC   │ADDC   │ADDC   │
	│ 3 │bit,   │addr 11│       │A      │A,     │A,     │A,     │A,     │
	│   │rel    │(p001) │       │       │#data  │dir    │@R0    │@R1    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │JC     │AJMP   │ORL    │ORL    │ORL    │ORL    │ORL    │ORL    │
	│ 4 │bit,   │addr 11│dir,   │dir,   │A,     │A,     │A,     │A,     │
	│   │rel    │(p010) │A      │#data  │#data  │dir    │@R0    │@R1    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │JNC    │ACALL  │ANL    │ANL    │ANL    │ANL    │ANL    │ANL    │
	│ 5 │bit,   │addr 11│dir,   │dir,   │A,     │A,     │A,     │A,     │
	│   │rel    │(p010) │A      │#data  │#data  │dir    │@R0    │@R1    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │JZ     │AJMP   │XRL    │XRL    │XRL    │XRL    │XRL    │XRL    │
	│ 6 │bit,   │addr 11│dir,   │dir,   │A,     │A,     │A,     │A,     │
	│   │rel    │(p011) │A      │#data  │#data  │dir    │@R0    │@R1    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │JNZ    │ACALL  │ORL    │JMP    │MOV    │MOV    │MOV    │MOV    │
	│ 7 │bit,   │addr 11│C,     │@A+DPTR│A,     │dir,   │@R0,   │@R1,   │
	│   │rel    │(p011) │bit    │       │#data  │#data  │#data  │#data  │
	│   │       │       │       │       │       │       │       │       │
	└───┴───────┴───────┴───────┴───────┴───────┴───────┴───────┴───────┘


	┌───┬───────┬───────┬───────┬───────┬───────┬───────┬───────┬───────┐
	│   │   8   │   9   │   A   │   B   │   C   │   D   │   E   │   F   │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │INC    │INC    │INC    │INC    │INC    │INC    │INC    │INC    │
	│ 0 │R0     │R1     │R2     │R3     │R4     │R5     │R6     │R7     │
	│   │       │       │       │       │       │       │       │       │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │DEC    │DEC    │DEC    │DEC    │DEC    │DEC    │DEC    │DEC    │
	│ 1 │R0     │R1     │R2     │R3     │R4     │R5     │R6     │R7     │
	│   │       │       │       │       │       │       │       │       │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │ADD    │ADD    │ADD    │ADD    │ADD    │ADD    │ADD    │ADD    │
	│ 2 │A,     │A,     │A,     │A,     │A,     │A,     │A,     │A,     │
	│   │R0     │R1     │R2     │R3     │R4     │R5     │R6     │R7     │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │ADDC   │ADDC   │ADDC   │ADDC   │ADDC   │ADDC   │ADDC   │ADDC   │
	│ 3 │A,     │A,     │A,     │A,     │A,     │A,     │A,     │A,     │
	│   │R0     │R1     │R2     │R3     │R4     │R5     │R6     │R7     │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │ORL    │ORL    │ORL    │ORL    │ORL    │ORL    │ORL    │ORL    │
	│ 4 │A,     │A,     │A,     │A,     │A,     │A,     │A,     │A,     │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │ANL    │ANL    │ANL    │ANL    │ANL    │ANL    │ANL    │ANL    │
	│ 5 │A,     │A,     │A,     │A,     │A,     │A,     │A,     │A,     │
	│   │R0     │R1     │R2     │R3     │R4     │R5     │R6     │R7     │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │XRL    │XRL    │XRL    │XRL    │XRL    │XRL    │XRL    │XRL    │
	│ 6 │A,     │A,     │A,     │A,     │A,     │A,     │A,     │A,     │
	│   │R0     │R1     │R2     │R3     │R4     │R5     │R6     │R7     │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │
	│ 7 │R0,    │R1,    │R2,    │R3,    │R4,    │R5,    │R6,    │R7,    │
	│   │#data  │#data  │#data  │#data  │#data  │#data  │#data  │#data  │
	│   │       │       │       │       │       │       │       │       │
	└───┴───────┴───────┴───────┴───────┴───────┴───────┴───────┴───────┘


	┌───┬───────┬───────┬───────┬───────┬───────┬───────┬───────┬───────┐
	│   │   0   │   1   │   2   │   3   │   4   │   5   │   6   │   7   │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │SJMP   │AJMP   │ANL    │MOVC   │DIV    │MOV    │MOV    │MOV    │
	│ 8 │rel    │addr 11│C,     │A,     │AB     │dir,   │dir,   │dir,   │
	│   │       │(p100) │bit    │@A+PC  │       │dir    │@R0    │@R1    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │MOV    │ACALL  │MOV    │MOVC   │SUBB   │SUBB   │SUBB   │SUBB   │
	│ 9 │DPTR,  │addr 11│bit,   │A,     │A,     │A,     │A,     │A,     │
	│   │#data16│(p100) │C      │@A+DPTR│#data  │dir    │@R0    │@R1    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │ORL    │AJMP   │MOV    │INC    │MUL    │       │MOV    │MOV    │
	│ A │C,     │addr 11│C,     │DPTR   │AB     │       │@R0,   │@R1,   │
	│   │/bit   │(p101) │bit    │       │       │       │dir    │dir    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │ANL    │ACALL  │CPL    │CPL    │CJNE   │CJNE   │CJNE   │CJNE   │
	│ B │C,     │addr 11│bit    │C      │A,     │A,     │@R0,   │@R1,   │
	│   │/bit   │(p101) │       │       │#data, │dir,   │#data, │#data, │
	│   │       │       │       │       │rel    │rel    │rel    │rel    │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │PUSH   │AJMP   │CLR    │CLR    │SWAP   │XCH    │XCH    │XCH    │
	│ C │dir    │addr 11│bit    │C      │A      │A,     │A,     │A,     │
	│   │       │(p110) │       │       │       │dir    │@R0    │@R1    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │POP    │ACALL  │SETB   │SETB   │DA     │DJNZ   │XCHD   │XCHD   │
	│ D │dir    │addr 11│bit    │C      │A      │dir,   │A,     │A,     │
	│   │       │(p110) │       │       │       │rel    │@R0    │@R1    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │MOVX   │AJMP   │MOVX   │MOVX   │CLR    │MOV    │MOV    │MOV    │
	│ E │A,     │addr 11│A,     │A,     │A      │A,     │A,     │A,     │
	│   │DPTR   │(p111) │@R0    │@R1    │       │dir    │@R0    │@R1    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │MOVX   │ACALL  │MOVX   │MOVX   │CPL    │MOV    │MOV    │MOV    │
	│ F │DPTR,  │addr 11│@R0,   │@R1,   │A      │dir,   │@R0,   │@R1,   │
	│   │A      │(p111) │A      │A      │       │A      │A      │A      │
	│   │       │       │       │       │       │       │       │       │
	└───┴───────┴───────┴───────┴───────┴───────┴───────┴───────┴───────┘


	┌───┬───────┬───────┬───────┬───────┬───────┬───────┬───────┬───────┐
	│   │   8   │   9   │   A   │   B   │   C   │   D   │   E   │   F   │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │
	│ 8 │dir,   │dir,   │dir,   │dir,   │dir,   │dir,   │dir,   │dir,   │
	│   │R0     │R1     │R2     │R3     │R4     │R5     │R6     │R7     │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │SUBB   │SUBB   │SUBB   │SUBB   │SUBB   │SUBB   │SUBB   │SUBB   │
	│ 9 │A,     │A,     │A,     │A,     │A,     │A,     │A,     │A,     │
	│   │R0     │R1     │R2     │R3     │R4     │R5     │R6     │R7     │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │
	│ A │R0,    │R1,    │R2,    │R3,    │R4,    │R5,    │R6,    │R7,    │
	│   │dir    │dir    │dir    │dir    │dir    │dir    │dir    │dir    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │CJNE   │CJNE   │CJNE   │CJNE   │CJNE   │CJNE   │CJNE   │CJNE   │
	│ B │R0,    │R1,    │R2,    │R3,    │R4,    │R5,    │R6,    │R7,    │
	│   │#data, │#data, │#data, │#data, │#data, │#data, │#data, │#data, │
	│   │rel    │rel    │rel    │rel    │rel    │rel    │rel    │rel    │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │XCH    │XCH    │XCH    │XCH    │XCH    │XCH    │XCH    │XCH    │
	│ C │A,     │A,     │A,     │A,     │A,     │A,     │A,     │A,     │
	│   │R0     │R1     │R2     │R3     │R4     │R5     │R6     │R7     │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │DJNZ   │DJNZ   │DJNZ   │DJNZ   │DJNZ   │DJNZ   │XCHD   │XCHD   │
	│ D │R0,    │R1,    │R2,    │R3,    │R4,    │R5,    │R6,    │R7,    │
	│   │rel    │rel    │rel    │rel    │rel    │rel    │rel    │rel    │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │
	│ E │A,     │A,     │A,     │A,     │A,     │A,     │A,     │A,     │
	│   │R0     │R1     │R2     │R3     │R4     │R5     │R6     │R7     │
	│   │       │       │       │       │       │       │       │       │
	├───┼───────┼───────┼───────┼───────┼───────┼───────┼───────┼───────┤
	│   │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │MOV    │
	│ F │R0,    │R1,    │R2,    │R3,    │R4,    │R5,    │R6,    │R7,    │
	│   │A      │A      │A      │A      │A      │A      │A      │A      │
	│   │       │       │       │       │       │       │       │       │
	└───┴───────┴───────┴───────┴───────┴───────┴───────┴───────┴───────┘


		7.3 Описание команд.

	7.3.1 Арифметические команды

	ADD		сложение

	ADDC		сложение с учетом переноса

	SUBB		вычитание с учетом переноса

	INC		увеличение на единицу

	DEC		уменьшение на единицу

	MUL		перемножение без знака регистров A и B, младший байт
			результата помещается в A, старший в B. Флаг V устана-
			вливается если результат больше 255.  C сбрасывается.
	DIV		деление без знака регистра A на B, целая часть зано-
			сится в A, в B остаток. C и V сбрасываются. Если про-
			изводится деление на 0, то A и B будут неопределены,
			при этом V устанавливается, а C сбрасывается.

	DA		двоично-десятичная корркция. Изменяет C, V неменяется.


	7.3.2 Логические операции.

	ANL		логическое И.

	ORL		логическое ИЛИ.

	XRL		логическое исключающее ИЛИ.

	CLR		обнуление.

	CPL		инвертирование.

	RL		циклический сдвиг влево.

	RLC		циклический сдвиг влево через перенос.

	RR		циклический сдвиг вправо.

	RRC		циклический сдвиг вправо через перенос.



	7.3.3 Команды передачи данных.

	SWAP		перестановка в A младших 4 разрядов со старшими.

	MOV		пересылка байта или слова данных

	MOVC	A,@A+DPTR	пересылка в A байта данных памяти программ,
				адресуемого результатом A+DPTR.

	MOVC	A,@A+PC		пересылка в A байта данных памяти программ,
				адресуемого результатом A+PC+1.

	MOVX		персылка байта данных из внешней памяти данных.

	PUSH		засылка в стек прямоадресуемого регистра.

	POP		извлечение из стека и загрузка прямоадресуемого
			регистра.

	XCH		обмен содержимым A с регистром или ячейкой памяти.

	XCHD		обмен содержимым младших 4 разрядов A с ячейкой
			памяти адресуемой R0 или R1.


	7.3.4 Команды переходов.

	ACALL		вызов подпрограммы в пределах 2 Кбайт.

	LCALL		вызов подпрограммы в пределах 64 Кбайт.

	RET		возврат из подпрограммы.

	RETI		возврат из прерывания.

	AJMP		безусловный переход в пределах 2 Кбайт.

	LJMP		безусловный переход в пределах 64 Кбайт.

	SJMP		безусловный переход по байту смещения.

	JMP	@A+DPTR	переход по адресу результата A+DPTR.

	JZ		переход если A равен 0.

	JNZ		переход если A не равен 0.

	CJNE		переход если A и второй операнд не равны.

	DJNZ		уменьшение операнда и переход если он не равен 0.

	NOP		пустая операция.


	7.3.5 Команды битовой обработки.

	SETB		установка бита в "1".

	CLR		установка бита в "0".

	MOV		пересылка бита.

	ANL		логическое и двух битов.

	ORL		логическое или двух битов.

	JC		переход если флаг C установлен.

	JNC		переход если флаг C сброшен.

	JB		переход если прямоадресуемый бит установлен в "1".

	JNB		переход если прямоадресуемый бит установлен в "0".

	JBC		переход если прямоадресуемый бит установлен в "1" и
			его очистка.

	CPL		инвертирование бита.



		Временные диаграммы работы процессора.
    

                 │                                               │                                               │
                 │                                               │                                               │
                 │ T1      T2      T3      T4      T5      T6    │ T7      T8      T9     T10     T11     T12    │ T1      T2
                 ├───┐   ┌───┐   ┌───┐   ┌───┐   ┌───┐   ┌───┐   ├───┐   ┌───┐   ┌───┐   ┌───┐   ┌───┐   ┌───┐   ├───┐   ┌───┐   ┌──
                 │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │  
                 │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │   │  
                ─┤   └───┘   └───┘   └───┘   └───┘   └───┘   └───┤   └───┘   └───┘   └───┘   └───┘   └───┘   └───┤   └───┘   └───┘  
                 │                                               │                                               │
                 │                                               │                                               │        │
                 │        │                │                     │  T cy                                         │        │
                 │        │<--------------------------------------------------------------------------------------------->│
                 │        │   T lhll       │                     │                           T lhlh              │        │
                 │        │<-------------->│                     │         │<-------------------------------------------->│
                 │        │ ______________ │                     │         │ ____________                        │        │ _______  
                 │        │/              \│                     │         │/            \                       │        │/                                    
 ALE             │        /                \                     │         /              \                      │        /
             ____│_______/│                │\____________________│________/│               \_____________________│_______/│                               
                 │                         │                     │                                               │        │
                 │                         │            T plph   │                                               │
                 │                         │       │<------------------->│                                       │
                 │          _______________│______ │             │       │ ___________________                   │        _________
 ────            │         /               │      \│             │       │/                   \                  │       /                      
 PSEN            │        /                │       \             │       /                     \                 │      /
             ____│_______/                 │       │\____________│______/│                      \________________│_____/                       
                 │                         │       │             │       │                                       │
                 │                         │       │             │       │                                       │
                 │                         │       │             │       │                                       │
             ____│_________________________│_______│_____________│_______│_______________________________________│_________________               
                 │  /                      │       │             │       │                                       │                                         
 ──  ──          │ /                       │       │             │       │                                       │
 RD, WR          │/                        │       │             │       │                                       │
                 │                         │       │             │       │                                       │
                 │                         │       │             │       │                                       │
             ____│________________    _____│_______│_____________│_______│________    ___________________________│________________
                 │                \  /     │       │             │       │        \  /                           │                \ 
  Port 2         │                 ><      │       │ A15 - A8    │       │         ><                 A15 - A8   │                 >
             ____│________________/  \_____│_______│_____________│_______│________/  \___________________________│________________/ 
                 │                         │       │             │       │                                       │
                 │                         │      ││ T llax      │       │                                       │
                 │                       ->│------│<---------    │       │                                       │
                 │           T avll   │    │      ││             │       │ T phdz                                │
                 │           -------->│----│<---  ││             │       │<------>│                              │
                 │                    │    │      ││  T pliv     │       │        │                              │
                 │                    │   T azpl  ││<------->│   │ T phdx││       │                              │
                 │                    │   ------->││<-       │   │ ----->││<-     │                              │
           ______│________________    │___________││______   │___│_______││_______│   ____________________    ___│________________
          /                       \  /│           │       \  /            │       \  /                    \  /                    \ 
  Port 0 <                         >< │     A7 - A0        ><│            │       │><       A7 - A0        ><                      >
          \_______________________/  \│___________________/  \____________│_______/  \____________________/  \____________________/ 
                                      │      T aviv          │
                                      │<-------------------->│
                                                                                                     
                                                                                            
                                                                                            

                 │          ______________                                                                       │          _______  
                 │         /              \                                                                      │         /                                    
 ALE             │        /                \                                                                     │        /
             ____│_______/                  \____________________________________________________________________│_______/                                
                 │                                                                                               │
                 │      _________________________________________________________________________________________│_________________               
 ────            │     /                                                                                         │
 PSEN            │    /                                                                                          │               
            _____│___/                                                  │                                        │ │
                 │                                                      │                T rlrh                  │ │
                 │                                                      │<---------------------------------------->│
            _____│_____________________________________________________ │                                        │ │ ______________ 
                 │                                                     \│                                        │ │/
 ──              │                                                      \                                        │ /
 RD              │                                                      │\_______________________________________│/│                              
                 │                                                      │                                        │ │                                       
             ____│________________    __________________________________│________________________________________│_│______________
                 │                \  /                                  │                                        │ │              \ 
 Port 2          │                 ><             A15 - A8              │                                        │ │               >
             ____│________________/  \__________________________________│________________________________________│_│______________/ 
                 │                                                      │                                        │ │      T rhdz
                 │                   │              T avwl              │  T rldv    │                 T rhdx    │ │ │<------------>│
                 │                   │<-------------------------------->│<---------->│                ---------->│---│<-            │
           ______│________________   │____________________________________________   │___________________________│_│_│____________  │
          /                       \  /                                            \  /                               │            \ │
 Port 0  <                         ><│                 A7 - A0                     ><│               DATA            │             >│
          \_______________________/  \____________________________________________/  \_______________________________│____________/ │
                                     │                    T avdv                     │
                                     │<--------------------------------------------->│


                                                                                                                  
                 │          ______________                                                                                  _______  
                 │         /              \                                                                                /                                    
 ALE             │        /                \                                                                              /
             ____│_______/                  \____________________________________________________________________________/                                
                 │                                                                                                
                 │      ___________________________________________________________________________________________________________               
 ────            │     /                                                                                          
 PSEN            │    /                                                                                                          
            _____│___/                                                  │                                          │
                 │                                                      │                T wlwh                    │
                 │                                                      │<---------------------------------------->│
            _____│____________________________________________________│ │                                          │ ______________ 
                 │                                                    │\│                                          │/
 ──              │                                                    │ \                                          /
 WR              │                                                    │ │\________________________________________/│                              
                 │                                                    │ │                                          │                                       
             ____│________________    ________________________________│_│__________________________________________│______________
                 │                \  /                                │ │                                          │              \ 
 Port 2          │                 ><             A15 - A8            │ │                                          │               >
             ____│________________/  \________________________________│_│__________________________________________│______________/ 
                 │                                            T dvwx  │ │                                          │               
                 │                                         │<-------->│ │           T qvwh                         │   T whqx           
                 │                                         │<----------------------------------------------------->│<-------------->│
           ______│________________   │__________________   │____________│__________________________________________│______________  │
          /                       \  /                  \  /            │                                                         \ │
 Port 0  <                         ><│     A7 - A0       ><│            │                            DATA                          >│
          \_______________________/  \__________________/  \____________│_________________________________________________________/ │
                                     │             T avwl               │             
                                     │<-------------------------------->│                 

